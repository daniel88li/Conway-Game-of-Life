{"version":3,"sources":["Components/Button.js","Components/Controls.js","Components/Canvas.js","App.js","index.js"],"names":["Button","props","className","btnStyle","btnSize","btnColour","btnClasses","onClick","text","Controls","id","dimStyle","onStart","onStop","toggleStroke","Canvas","canvasRef","useRef","gridRef","intervalRef","cellSize","updateSpeed","useState","generation","setGeneration","population","setPopulation","lineFlag","setLineFlag","dimButtons","setDimButtons","generationUpdate","grid","cols","rows","nextGen","map","eachRow","row","col","neighbours","i","j","neighbourCol","neighbourRow","currCell","draw","useCallback","context","length","cell","fillStyle","fillRect","strokeStyle","strokeRect","update","current","canvas","getContext","Math","floor","width","height","prev","getPopulation","useEffect","offsetWidth","offsetHeight","Array","fill","random","buildGrid","updateInterval","setInterval","requestAnimationFrame","clearInterval","reduce","arr","concat","sum","value","ref","e","cellRow","nativeEvent","offsetY","cellCol","offsetX","handleClick","App","href","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.14cb9133.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nfunction Button(props) {\r\n  return (\r\n    <button\r\n      className={`btn ${props.btnStyle} ${props.btnSize} ${props.btnColour} ${props.btnClasses}`}\r\n      onClick={props.onClick}\r\n    >\r\n      {props.text}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport Button from \"./Button\";\r\n\r\nfunction Controls(props) {\r\n  return (\r\n    <div className=\"controls\">\r\n      <Button\r\n        id=\"button-start\"\r\n        btnStyle=\"btn--round\"\r\n        btnSize=\"btn--small\"\r\n        btnColour=\"blue\"\r\n        text=\"Start\"\r\n        btnClasses={props.dimStyle[0] ? \"btn--dim\" : \"\"}\r\n        onClick={props.onStart}\r\n      />\r\n\r\n      <Button\r\n        id=\"button-start\"\r\n        btnStyle=\"btn--round\"\r\n        btnSize=\"btn--small\"\r\n        btnColour=\"blue\"\r\n        text=\"Stop\"\r\n        btnClasses={props.dimStyle[1] ? \"btn--dim\" : \"\"}\r\n        onClick={props.onStop}\r\n      />\r\n\r\n      <Button\r\n        id=\"button-canvas-lines\"\r\n        btnStyle=\"btn--round\"\r\n        btnSize=\"btn--small\"\r\n        btnColour=\"blue\"\r\n        text=\"Toggle Lines\"\r\n        btnClasses=\"\"\r\n        onClick={props.toggleStroke}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Controls;\r\n","import React, { useRef, useEffect, useState, useCallback } from \"react\";\r\nimport Controls from \"./Controls\";\r\n\r\nfunction Canvas(props) {\r\n  const canvasRef = useRef(null);\r\n  const gridRef = useRef(null);\r\n  const intervalRef = useRef(null);\r\n  const cellSize = 10;\r\n  const deadCell = \"white\";\r\n  const aliveCell = \"black\";\r\n  const updateSpeed = \"500\";\r\n  const [generation, setGeneration] = useState(0);\r\n  const [population, setPopulation] = useState(0);\r\n  const [lineFlag, setLineFlag] = useState(true);\r\n  const [dimButtons, setDimButtons] = useState([false, false]);\r\n\r\n  // build grid and init cell values (dead/alive)\r\n  function buildGrid(cols, rows) {\r\n    const gridArray = new Array(rows)\r\n      .fill(null)\r\n      .map(() =>\r\n        new Array(cols).fill(null).map(() => Math.floor(Math.random() * 2))\r\n      );\r\n    return gridArray;\r\n  }\r\n\r\n  // update grid based on the rules\r\n  function generationUpdate(grid, cols, rows) {\r\n    const nextGen = grid.map((eachRow) => [...eachRow]);\r\n\r\n    for (let row = 0; row < rows; row++) {\r\n      for (let col = 0; col < cols; col++) {\r\n        let neighbours = 0;\r\n\r\n        // check adjacent cells\r\n        for (let i = -1; i <= 1; i++) {\r\n          for (let j = -1; j <= 1; j++) {\r\n            if (i === 0 && j === 0) {\r\n              continue;\r\n            }\r\n            const neighbourCol = col + i;\r\n            const neighbourRow = row + j;\r\n            if (\r\n              neighbourCol >= 0 &&\r\n              neighbourCol < cols &&\r\n              neighbourRow >= 0 &&\r\n              neighbourRow < rows\r\n            ) {\r\n              neighbours += grid[neighbourRow][neighbourCol];\r\n            }\r\n          }\r\n        }\r\n\r\n        // update for next generation\r\n        const currCell = grid[row][col];\r\n        if (currCell === 1 && (neighbours < 2 || neighbours > 3)) {\r\n          nextGen[row][col] = 0;\r\n        } else if (currCell === 0 && neighbours === 3) {\r\n          nextGen[row][col] = 1;\r\n        }\r\n      }\r\n    }\r\n    return nextGen;\r\n  }\r\n\r\n  const draw = useCallback(\r\n    (context, grid) => {\r\n      for (let row = 0; row < grid.length; row++) {\r\n        for (let col = 0; col < grid[row].length; col++) {\r\n          const cell = grid[row][col];\r\n          context.fillStyle = cell ? aliveCell : deadCell;\r\n          context.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);\r\n          context.strokeStyle = lineFlag ? \"grey\" : \"white\";\r\n          context.strokeRect(\r\n            col * cellSize,\r\n            row * cellSize,\r\n            cellSize,\r\n            cellSize\r\n          );\r\n        }\r\n      }\r\n    },\r\n    [lineFlag]\r\n  );\r\n\r\n  // function clearCanvas(context) {\r\n  //   context.clearRect(0, 0, context.canvas.width, context.canvas.height);\r\n  // }\r\n\r\n  const update = useCallback(() => {\r\n    let grid = gridRef.current;\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    const cols = Math.floor(canvas.width / cellSize);\r\n    const rows = Math.floor(canvas.height / cellSize);\r\n    grid = generationUpdate(grid, cols, rows);\r\n    draw(context, grid);\r\n    setGeneration((prev) => prev + 1);\r\n    setPopulation(getPopulation(grid));\r\n    gridRef.current = grid;\r\n  }, [draw]);\r\n\r\n  // run once on mount\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    canvas.width = canvas.offsetWidth;\r\n    canvas.height = canvas.offsetHeight;\r\n    // console.log(canvas.width, canvas.height);\r\n    const cols = Math.floor(canvas.width / cellSize);\r\n    const rows = Math.floor(canvas.height / cellSize);\r\n    // console.log(cols, rows);\r\n    let grid = buildGrid(cols, rows);\r\n    gridRef.current = grid;\r\n\r\n    draw(context, grid);\r\n\r\n    function update() {\r\n      grid = generationUpdate(grid, cols, rows);\r\n      draw(context, grid);\r\n      setGeneration((prev) => prev + 1);\r\n      setPopulation(getPopulation(grid));\r\n      gridRef.current = grid;\r\n    }\r\n\r\n    const updateInterval = setInterval(() => {\r\n      requestAnimationFrame(update);\r\n    }, updateSpeed);\r\n    intervalRef.current = updateInterval;\r\n\r\n    return () => clearInterval(updateInterval);\r\n  }, []);\r\n\r\n  const onStart = useCallback(() => {\r\n    onStop();\r\n    const updateInterval = setInterval(() => {\r\n      requestAnimationFrame(update);\r\n    }, updateSpeed);\r\n    intervalRef.current = updateInterval;\r\n    setDimButtons([true, false]);\r\n  }, [update]);\r\n\r\n  function onStop() {\r\n    clearInterval(intervalRef.current);\r\n    setDimButtons([false, true]);\r\n  }\r\n\r\n  function toggleStroke() {\r\n    setLineFlag((prev) => !prev);\r\n  }\r\n\r\n  useEffect(() => {\r\n    onStart();\r\n  }, [lineFlag, onStart]);\r\n\r\n  function getPopulation(grid) {\r\n    return grid\r\n      .reduce((arr, row) => arr.concat(row))\r\n      .reduce((sum, value) => sum + value);\r\n  }\r\n\r\n  // update cells on click\r\n  function handleClick(e) {\r\n    let grid = gridRef.current;\r\n    const cellRow = Math.floor(e.nativeEvent.offsetY / cellSize);\r\n    const cellCol = Math.floor(e.nativeEvent.offsetX / cellSize);\r\n    grid[cellRow][cellCol] = grid[cellRow][cellCol] ? 0 : 1;\r\n    gridRef.current = grid;\r\n    // pause game to enable multiple edits\r\n    onStop();\r\n    const context = canvasRef.current.getContext(\"2d\");\r\n    draw(context, grid);\r\n  }\r\n\r\n  return (\r\n    <div className=\"game\">\r\n      <canvas\r\n        id=\"canvas\"\r\n        ref={canvasRef}\r\n        {...props}\r\n        onClick={(e) => handleClick(e)}\r\n      />\r\n      <div className=\"game-stat\">\r\n        <p>Generation: {generation}</p> <p>Population: {population}</p>\r\n      </div>\r\n      <p>Updates every {updateSpeed} ms.</p>\r\n      <Controls\r\n        onStart={onStart}\r\n        onStop={onStop}\r\n        toggleStroke={toggleStroke}\r\n        dimStyle={dimButtons}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Canvas;\r\n","import React from \"react\";\r\nimport Canvas from \"./Components/Canvas\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>Conway's Game of Life</h1>\r\n      <h3>\r\n        Read the rules on{\" \"}\r\n        <a href={\"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life\"}>\r\n          wikipedia\r\n        </a>\r\n      </h3>\r\n      <Canvas />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./dist/css/main.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}